<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="description" content="Data Visualization"/>
    <meta name="keywords" content="HTML, CSS, D3"/>
    <meta name="author" content="Sophie Nadine Jacobs"/>

    <title>Task 2.1 D3 Data Binding</title>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="../menu.css">
    <!-- Navigation bar -->
    <div class="navbar">
        <a href="..\index.html">HOME</a>
        <a href="..\Lab 1\lab1.1.html" >Lab 1.1</a>
        <a href="..\Lab 1\lab1.2.html">Lab 1.2</a>
        <a href="..\Lab 1\lab1.3.html">Lab 1.3</a>
        <a href="..\Lab 2\lab2.1.html">Lab 2.1</a>
        <a href="..\Lab 2\lab2.2.html">Lab 2.2</a>
        <a href="..\Lab 2\lab2.3.html">Lab 2.3</a>
        <a href="..\Lab 2\lab2.4.html" >Lab 2.4</a>
        <a href="..\Lab 3\lab3.1.html">Lab 3.1</a>
        <a href="..\Lab 3\lab3.2.html" class="active">Lab 3.2</a>
    </div>
</head>
<body>
    <h1>Drawing with Data - Scatter Plot</h1>
    
    <script>
        // Define the width, height, and padding for the SVG canvas
        var w = 700; // Width of the SVG
        var h = 300; // Height of the SVG
        var padding = 30; // Padding around the edges
        var standardRadius = 5; // Standard radius for all circles

        // Dataset for plotting points (including optional third value for radius)
        var dataset = [
            [5, 20, 5],
            [480, 90, 10],
            [250, 50, 15],
            [100, 33, 20],
            [330, 95, 10],
            [410, 12, 8],
            [475, 44, 12],
            [25, 67, 6],
            [85, 21, 7],
            [220, 88, 14]
        ];

        var xScale = d3.scaleLinear()
            .domain([d3.min(dataset, function(d) { return d[0]; }) - padding,
                     d3.max(dataset, function(d) { return d[0]; }) + padding])
            .range([padding, w - padding]);

        var yScale = d3.scaleLinear()
            .domain([d3.max(dataset, function(d) { return d[1]; }) + padding,
                     d3.min(dataset, function(d) { return d[1]; }) - padding])
            .range([padding, h - padding]); // Reversed range to position higher values at the top

        var xAxis = d3.axisBottom()
            .ticks(5)
            .scale(xScale);

        var yAxis = d3.axisLeft()
            .ticks(5)
            .scale(yScale);

        // Create the SVG canvas
        var svg = d3.select("body")
            .append("svg")
            .attr("width", w)
            .attr("height", h);

        // Add circles for each data point
        svg.selectAll("circle")
            .data(dataset)
            .enter()
            .append("circle")
            .attr("cx", function(d) {
                return xScale(d[0]); // Use xScale for the x-coordinate
            })
            .attr("cy", function(d) {
                return yScale(d[1]); // Use yScale for the y-coordinate
            })
            .attr("r", standardRadius)
            .attr("fill", "slategrey"); // Color of the circle

        // Add text labels for each data point
        svg.selectAll("text")
            .data(dataset)
            .enter()
            .append("text")
            .text(function(d){
                return d[0] + "," + d[1]; // Display x, y coordinates as text
            })
            .attr("x", function(d) {
                return xScale(d[0]) + 5; // Set the x-coordinate slightly to the right of the circle
            })
            .attr("y", function(d) {
                return yScale(d[1]) - 5; // Set the y-coordinate slightly above the circle
            })
            .attr("font-size", "10px") // Set font size for text
            .attr("fill", "black"); // Color of the text

        // Add the x-axis
        svg.append("g")
            .attr("transform", "translate(0, "+ (h - padding) + ")")
            .call(xAxis);

        // Add the y-axis
        svg.append("g")
            .attr("transform", "translate(" + padding + ", 0)") // Move the y-axis to the left edge
            .call(yAxis);
    </script>

    <br><br>

    <p>The following is a modified version of original Lab3-2 with axis label.</p>

    <script>
        // define the width, height, and padding for the svg canvas
        var w = 700; // width of the svg
        var h = 300; // height of the svg
        var padding = 50; // padding around the edges to fit axis labels
        var standardRadius = 5; // standard radius for all circles

        // updated dataset for tree age (x) and tree height (y)
        var dataset = [
            [2, 8],
            [3, 5],
            [5, 17],
            [6, 6],
            [6, 12],
            [7, 20],
            [8, 22],
            [10, 11],
            [5, 12],
            [6, 16]
        ];

        // x-scale based on the tree age
        var xScale = d3.scaleLinear()
            .domain([d3.min(dataset, function(d) { return d[0]; }) - 1,
                    d3.max(dataset, function(d) { return d[0]; }) + 1]) // add padding for aesthetic space
            .range([padding, w - padding]);

        // y-scale based on the tree height
        var yScale = d3.scaleLinear()
            .domain([d3.max(dataset, function(d) { return d[1]; }) + 2,
                    d3.min(dataset, function(d) { return d[1]; }) - 2]) // reverse the range for proper plot orientation
            .range([padding, h - padding]); 

        // define x-axis based on the x-scale (tree age)
        var xAxis = d3.axisBottom()
            .ticks(5)
            .scale(xScale);

        // define y-axis based on the y-scale (tree height)
        var yAxis = d3.axisLeft()
            .ticks(5)
            .scale(yScale);

        // create the svg canvas
        var svg = d3.select("body")
            .append("svg")
            .attr("width", w)
            .attr("height", h);

        // add circles for each data point
        svg.selectAll("circle")
            .data(dataset)
            .enter()
            .append("circle")
            .attr("cx", function(d) {
                return xScale(d[0]); // use xScale for the x-coordinate (tree age)
            })
            .attr("cy", function(d) {
                return yScale(d[1]); // use yScale for the y-coordinate (tree height)
            })
            .attr("r", standardRadius) // use standard radius
            .attr("fill", "slategrey"); // set circle color

        // add text labels for each data point
        svg.selectAll("text")
            .data(dataset)
            .enter()
            .append("text")
            .text(function(d){
                return d[0] + "," + d[1]; // display tree age and height
            })
            .attr("x", function(d) {
                return xScale(d[0]) + 5; // position x of text near circle
            })
            .attr("y", function(d) {
                return yScale(d[1]) - 5; // position y of text above circle
            })
            .attr("font-size", "10px") // font size for labels
            .attr("fill", "black"); // color of the text

        // add the x-axis
        svg.append("g")
            .attr("transform", "translate(0, "+ (h - padding) + ")") // move to the bottom of the svg
            .call(xAxis);

        // add x-axis label
        svg.append("text")
            .attr("transform", "translate(" + (w / 2) + " ," + (h - 10) + ")") // position in the center
            .style("text-anchor", "middle")
            .text("Tree Age (year)"); // x-axis label

        // add the y-axis
        svg.append("g")
            .attr("transform", "translate(" + padding + ", 0)") // move y-axis to the left
            .call(yAxis);

        // add y-axis label
        svg.append("text")
            .attr("transform", "rotate(-90)") // rotate the text for vertical alignment
            .attr("y", 15) // adjust position
            .attr("x", 0 - (h / 2)) // center it vertically
            .style("text-anchor", "middle")
            .text("Tree Height (m)"); // y-axis label
    </script>

    <br>
    <footer style="color:grey">COS30045 Data Visualization<br>Sophie Nadine Jacobs</footer>
</body>
</html>
